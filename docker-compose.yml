version: "3.8"

services:
  # .NET Application (No Database - connects to cloud DB)
  searchms-api:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: searchms-api
    environment:
      # ASP.NET Core
      ASPNETCORE_ENVIRONMENT: ${ASPNETCORE_ENVIRONMENT:-Development}
      ASPNETCORE_URLS: ${ASPNETCORE_URLS:-http://+:8080}

      # Database (Cloud)
      Database__ConnectionString: ${DB_CONN_CATALOGO}

      # AI Search
      AISearch__ServiceEndpoint: ${AZURE_SEARCH_SERVICE_ENDPOINT}
      AISearch__ApiKey: ${AZURE_SEARCH_ADMIN_API_KEY}
      AISearch__IndexName: ${AZURE_SEARCH_INDEX_NAME}

    ports:
      - "8080:8080"
    restart: unless-stopped
